import React,{Component} from 'react';import {    Dimensions,    ListView,    ScrollView,    Image,    View,    StyleSheet,    Text,    Platform,    TouchableOpacity,    RefreshControl,    Animated,    Easing,    TextInput,    Alert,    KeyboardAvoidingView} from 'react-native';import { connect } from 'react-redux';import Icon from 'react-native-vector-icons/FontAwesome';import {Toolbar,OPTION_SHOW,OPTION_NEVER,ACTION_MAP} from 'react-native-toolbar-wrapper';import VenueMap from './VenueMap';import TextInputWrapper from '../../encrypt/TextInputWrapper';import {getAccessToken} from "../../action/UserActions";import { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view'import {addVenue} from '../../action/MapActions'import {addMemberList} from "../../action/ActivityActions";var IMGS = [    require('../../../img/v1.jpg'),    require('../../../img/v2.jpg'),    require('../../../img/v3.jpg'),];var {height, width} = Dimensions.get('window');class AddVenue extends Component{    constructor(props) {        super(props);        this.state={            venue:{name:null,province:null,city:null,town:null,address:null,                phone:null,brief:null,feeDes:null}        }    }    goBack(){        const { navigator } = this.props;        if(navigator) {            navigator.pop();        }    }    _renderPage(data,pageID){        return (            <View style={{width:width}}>                <Image                    source={data}                    style={{width:width,flex:3}}                    resizeMode={"stretch"}                />            </View>        );    }    render() {        //[{brief=null, feeDes=每人每次15元, address=世纪大道10600号, yardTotal=6, town=历城区, manager=3, city=济南市, latitude=36.693125,        // unitNum=U000001, remark=, province=山东省, phone=18254888887, name=山东体育学院羽毛球馆, unitId=1, attachId=null, longitude=117.200185},        return (            <KeyboardAvoidingView style={{flex:1}} behavior="padding">                <Toolbar width={width} title='添加场馆' navigator={this.props.navigator} actions={[{icon:ACTION_MAP,show:OPTION_SHOW}]}                         onPress={(i)=>{                         }}>                    {/*场馆名称*/}                    <ScrollView>                    <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                        <View style={{flex:1}}>                            <Text>场馆名称：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆名称"                                val={this.state.venue.name}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{name:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{name:null})});}                                }                            />                        </View>                    </View>                    {/*场馆所在省分*/}                    <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                        <View style={{flex:1}}>                            <Text>所在省分：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆所在省"                                val={this.state.venue.province}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{province:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{venueName:null})});}                                }                            />                        </View>                    </View>                    {/*场馆所在城市*/}                    <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                        <View style={{flex:1}}>                            <Text>所在城市：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆所在城市"                                val={this.state.venue.city}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{city:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{city:null})});}                                }                            />                        </View>                    </View>                        {/*场馆所在区域*/}                        <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                            <View style={{flex:1}}>                                <Text>所 在 区：</Text>                            </View>                            <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                                borderRadius:10}}>                                <TextInputWrapper                                    placeholderTextColor='#888'                                    textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                    placeholder="请输入场馆所在区域"                                    val={this.state.venue.town}                                    onChangeText={                                        (value)=>{                                            this.setState({event:Object.assign(this.state.venue,{town:value})})                                        }}                                    onCancel={                                        ()=>{this.setState({event:Object.assign(this.state.venue,{town:null})});}                                    }                                />                            </View>                        </View>                        {/*场馆详细地址*/}                    <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                        <View style={{flex:1}}>                            <Text>详细地址：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆的详细地址"                                val={this.state.venue.address}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{address:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{address:null})});}                                }                            />                        </View>                    </View>                    {/*场馆联系方式*/}                    <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                        <View style={{flex:1}}>                            <Text>联系方式：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆联系方式"                                val={this.state.venue.phone}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{phone:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{phone:null})});}                                }                            />                        </View>                    </View>                    {/*场馆收费标准*/}                    <View style={{height:30,flexDirection:'row',justifyContent:'center',alignItems: 'center',backgroundColor:'#fff',margin:5}}>                        <View style={{flex:1}}>                            <Text>收费标准：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆收费标准"                                val={this.state.venue.feeDes}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{feeDes:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{feeDes:null})});}                                }                            />                        </View>                    </View>                    {/*场馆简介*/}                    <View style={{height:120,width:width,flexDirection:'column',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#fff',marginBottom:1}}>                        <View style={{flex:1,justifyContent:'flex-start',textAlign:'left'}}>                            <Text>场馆简介：</Text>                        </View>                        <View style={{flex:3,flexDirection:'row',justifyContent:'flex-start',alignItems: 'center',backgroundColor:'#eee',                            borderRadius:10}}>                            <TextInputWrapper                                placeholderTextColor='#888'                                textInputStyle={{marginLeft:20,fontSize:13,color:'#222'}}                                placeholder="请输入场馆简介"                                val={this.state.venue.brief}                                onChangeText={                                    (value)=>{                                        this.setState({event:Object.assign(this.state.venue,{brief:value})})                                    }}                                onCancel={                                    ()=>{this.setState({event:Object.assign(this.state.venue,{brief:null})});}                                }                            />                        </View>                    </View>                        <View style={{flexDirection:'row',height:50,justifyContent:'center',alignItems:'center',width:width,backgroundColor:'#fff',marginBottom:20}}>                            <TouchableOpacity style={{width:width*1/3,backgroundColor:'#fc6254',padding:10,flexDirection:'row',                                justifyContent:'center'}}                                              onPress={()=>{                                                  this.props.dispatch(addVenue(this.state.venue)).then((json)=>{                                                      if(json.re==1){                                                          alert('添加成功');                                                          this.goBack();                                                      }else{                                                          if(json.re==-100){                                                              this.props.dispatch(getAccessToken(false));                                                          }                                                      }                                                  });                                              }}>                                <Text style={{color:'#fff',fontSize:15}}>添加</Text>                            </TouchableOpacity>                        </View>                    </ScrollView>                </Toolbar>            </KeyboardAvoidingView>        );    }}var styles = StyleSheet.create({    container:{        flex:1,        flexDirection:'column'    },    popoverContent: {        width: 100,        height: 20,        justifyContent: 'center',        alignItems: 'center',    },    popoverText: {        color: '#ccc',        fontSize:14    }});module.exports = connect(state=>({        accessToken:state.user.accessToken,        personInfo:state.user.personInfo,        coaches:state.coach.coaches,    }))(AddVenue);